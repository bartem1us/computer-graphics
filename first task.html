<HTML>

<BODY>
    <canvas id='lab01' width='500' height='600' style="border:1px solid">
</canvas>
    <script>
        var canvas = document.getElementById('lab01');
        var ctx = canvas.getContext('2d');

        var i = 0;
        var direction = 1;

        var up_down = 0;
        var k = 0;
        var string = "#12a32a"

        document.addEventListener("keydown", function(event) { // отвечает за передвежение
            if (event.code == "ArrowRight") {
                direction = 1;
                up_down = 0;
            } else if (event.code == "ArrowLeft") {
                direction = -1;
                up_down = 0;
            }

            if (event.code == "ArrowDown") {
                up_down = -1;
                direction = 0;
            } else if (event.code == "ArrowUp") {
                up_down = 1;
                direction = 0;
            }
            if (event.code == "click") {
                string = '#' + (Math.random().toString(16) + '000000').substring(2, 8).toUpperCase();
            }


        });

        document.addEventListener("click", function(event) {
            if (event.which == 1) {
                string = '#' + (Math.random().toString(16) + '000000').substring(2, 8).toUpperCase();
            }
        });

        setInterval(function() { //отвечает за фигуру и её перемещение
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = string;
            ctx.fillRect(50 + i, 50 - k, 100, 100);
            i += direction;
            k += up_down;
        }, 10);
    </script>
</BODY>

</HTML>